<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <style>
    body {
        font-family: 'Roboto', sans-serif;
        font-size:35px;
    }
    table {
        background-color: gray;
        margin-left: auto;
        margin-right: auto;
        border-spacing: 10px; 
        width:80%; 
        height:400px; 
        text-align:center;
    }
    th,td {
        background-color: darkgray;
        border-radius: 15px;
    }
    p {
        background-color: darkgray;
        margin-left: auto;
        margin-right: auto;
        border-spacing: 10px; 
        width:80%; 
        text-align:center;
    }
    </style>
    <title>Calculator</title>
</head>
<body>

<table>
    <th colspan="4" id="total">0</th>
    <tr>
        <td id="plus" onclick="action('+')">+</td>
        <td id="one" onclick="click2(1)">1</td>
        <td id="two" onclick="click2(2)">2</td>
        <td id="three" onclick="click2(3)">3</td>
    </tr>
    <tr>
        <td id="minus" onclick="action('-')">-</td>
        <td id="four" onclick="click2(4)">4</td>
        <td id="five" onclick="click2(5)">5</td>
        <td id="six" onclick="click2(6)">6</td>
    </tr>
    <tr>
        <td id="mult" onclick="action('*')">*</td>
        <td id="seven" onclick="click2(7)">7</td>
        <td id="eight" onclick="click2(8)">8</td>
        <td id="nine" onclick="click2(9)">9</td>
    </tr>
    <tr>
        <td id="del" onclick="action('/')">/</td>
        <td id="res" onclick="res()">r</td>
        <td id="zero" onclick="click2(0)">0</td>
        <td id="equal" onclick="eq()"">=</td>
    </tr>
</table>
<p id = 'history'></p>
<script>
    let t=0;
    let data = [];
    let history_of_calc = [];
    let number=0;
    function click2(n){
        this.n = n;
        if (number>0){
            number = number*10 + n;
        }else{
            number = n;
        }
        document.getElementById("total").innerText = number;
    }
    
    function action(act){
        this.act = act;
        if(number>0){
            data.push(number);
            data.push(act);
            document.getElementById("total").innerText = number + ' ' + act;}
            number=0;
        }
        
        function eq(){
            data.push(number);
            let jdata = data.join('');
            console.log(jdata);
            t = eval(jdata);
        document.getElementById("total").innerText = t;
        history_of_calc.push(jdata + ' = ' + t);
        let h_o_c = history_of_calc.join('\n');
        document.getElementById("history").innerText = h_o_c;
        number=0;
        data = [];
    }
    function res(){
        number=0;
        t=0;
        history_of_calc=[];
        let h_o_c = history_of_calc.join('\n');
        document.getElementById("history").innerText = h_o_c;
        document.getElementById("total").innerText = t;
    }
    document.addEventListener("keydown", keyDownHandler, false);
    function keyDownHandler(e) {
        if (e.keyCode == 97) click2(1);
        else if (e.keyCode == 98) click2(2);
        else if (e.keyCode == 99) click2(3);
        else if (e.keyCode == 100) click2(4);
        else if (e.keyCode == 101) click2(5);
        else if (e.keyCode == 102) click2(6);
        else if (e.keyCode == 103) click2(7);
        else if (e.keyCode == 104) click2(8);
        else if (e.keyCode == 105) click2(9);
        else if (e.keyCode == 96) click2(0);

        else if (e.keyCode == 107) action('+');
        else if (e.keyCode == 109) action('-');
        else if (e.keyCode == 106) action('*');
        else if (e.keyCode == 111) action('/');
     
        else if (e.keyCode == 13) eq();
    }
</script>
</body>
</html>